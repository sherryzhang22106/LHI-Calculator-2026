# 评分模型说明更新

## 🎯 更新内容

### 问题
AI 分析可能理解错了分数含义，把高分当成问题，低分当成优势。

### 解决方案
在 DeepSeek Prompt 中详细说明评分规则和计算模型，确保 AI 正确理解分数含义。

---

## 📊 评分模型详解

### 1. 题目评分规则
```
问卷共 40 道题
每题 5 个选项：
- 选项 1（完全不同意）= 5 分
- 选项 2（比较不同意）= 4 分
- 选项 3（中立）= 3 分
- 选项 4（比较同意）= 2 分
- 选项 5（强烈同意）= 1 分
```

**注意**：题目测量的是**负面模式**（焦虑、回避、控制等），所以：
- 选"完全不同意"（5分）= 没有这个问题 = 好
- 选"强烈同意"（1分）= 有这个问题 = 需关注

### 2. 维度计算
```
6 个维度：
1. 依恋焦虑 (Attachment Anxiety)
2. 依恋回避 (Attachment Avoidance)
3. 控制欲 (Control)
4. 嫉妒强度 (Jealousy)
5. 情感依赖 (Emotional Dependency)
6. 关系不安全感 (Relationship Insecurity)
```

**步骤**：
```typescript
1. 原始分数：每道题 1-5 分
2. 维度平均分：Avg_dim = Σ分数 / 题数
3. Z 分数标准化：Z_dim = (3 - Avg_dim) / 1
   - 平均分低（接近1）→ Z高（接近+2）→ 健康
   - 平均分高（接近5）→ Z低（接近-2）→ 需关注
4. T 分数：T = 50 + 10Z
   - T 分数越高 = 该维度越健康
   - T ≥ 50 = 健康
   - T < 50 = 需改善
```

### 3. 总分计算
```typescript
1. 总体 Z 分数：Total_Z = (所有 Z_dim 之和) / 6
2. LHI 总分：LHI = norm.cdf(Total_Z) × 100
3. 分数范围：0-100
```

### 4. 分数解释
```
0-30：脆弱的爱（高风险，建议专业帮助）
31-50：平均以下（有潜在问题，需改善）
51-70：平均水平（平衡，有成长空间）
71-100：健康的爱（安全稳定的关系）
```

### 5. 依恋风格判断
```
基于焦虑和回避两个维度的 Z 分数交叉：

高焦虑Z（健康） + 高回避Z（健康） = 安全型
高焦虑Z（健康） + 低回避Z（不健康） = 疏离-回避型
低焦虑Z（不健康） + 高回避Z（健康） = 焦虑-迷恋型
低焦虑Z（不健康） + 低回避Z（不健康） = 恐惧-回避型
```

---

## 🤖 AI Prompt 更新

### 更新前
```
恋爱健康评估结果：52分(平均以下)，依恋恐惧-回避型，...

严格按照以下格式输出，每个部分必须独立：
```

### 更新后
```
【恋爱健康指数评估结果】
总分：52/100 (平均以下)
依恋风格：恐惧-回避型
各维度：依恋焦虑: T分43, 依恋回避: T分46, ...

【评分模型说明】
- 问卷40题，每题1-5分（1=完全不同意，5=强烈同意）
- 6个维度测量负面模式：焦虑、回避、控制、嫉妒、依赖、不安全感
- T分数计算：Z = (3 - 平均分) / 1，T = 50 + 10Z
- T分数越高=负面特质越低=关系越健康
- LHI总分 0-100：越高越健康
- 0-30=脆弱，31-50=偏低，51-70=平均，71-100=健康

【当前结果解读】
- 总分52：有改善空间
- T分高的维度（≥50）=该方面健康
- T分低的维度（<50）=该方面需改善

严格按以下格式输出5个独立部分（各150字）：
...
```

---

## ✅ 关键改进

### 1. 明确评分逻辑
**添加**：
- ✅ 每题分数规则（1-5 分）
- ✅ 负面模式测量说明
- ✅ T 分数计算公式
- ✅ 分数越高越健康的关系

### 2. 清晰的解读指南
**添加**：
- ✅ T 分 ≥50 = 健康
- ✅ T 分 <50 = 需改善
- ✅ LHI 总分阈值说明
- ✅ 当前结果的自动解读

### 3. 结构化信息
**改进**：
- ✅ 用【】标题分隔不同信息块
- ✅ 先给模型说明，再要求输出
- ✅ 明确"优势"="T分高"，"需注意"="T分低"

---

## 🧪 测试验证

### 测试案例 1：低分（需关注）
```
假设结果：
- LHI: 31 分
- 依恋焦虑 T分: 35（低于50）
- 依恋回避 T分: 40（低于50）
- 控制欲 T分: 42（低于50）

期望 AI 分析：
✅ 结果解释：31分处于"平均以下"，表示关系存在较多挑战
✅ 优势：（可能很少或没有T分≥50的维度）
✅ 需要注意：焦虑、回避、控制这些维度T分较低，需改善
✅ 建议：针对具体的低分维度给出改善方法
```

### 测试案例 2：高分（健康）
```
假设结果：
- LHI: 75 分
- 依恋焦虑 T分: 58（高于50）
- 依恋回避 T分: 62（高于50）
- 控制欲 T分: 55（高于50）

期望 AI 分析：
✅ 结果解释：75分处于"健康的爱"，关系整体良好
✅ 优势：焦虑、回避、控制等维度T分都较高，关系模式健康
✅ 需要注意：（可能很少，或指出可进一步提升的地方）
✅ 建议：如何维持健康状态，继续成长
```

### 测试案例 3：混合情况
```
假设结果：
- LHI: 52 分
- 依恋焦虑 T分: 45（低于50）❌
- 依恋回避 T分: 48（低于50）❌
- 控制欲 T分: 52（高于50）✅
- 嫉妒 T分: 55（高于50）✅
- 情感依赖 T分: 46（低于50）❌
- 不安全感 T分: 44（低于50）❌

期望 AI 分析：
✅ 优势：控制欲和嫉妒维度较健康（T分≥50）
✅ 需要注意：焦虑、回避、依赖、不安全感较低（T分<50）
✅ 建议：重点改善焦虑和不安全感（最低的维度）
```

---

## 📋 验收标准

### AI 分析应该：
- [x] 正确理解 LHI 总分（高分=好，低分=需关注）
- [x] 正确理解 T 分数（≥50=健康，<50=需改善）
- [x] "优势"部分列举 T 分高的维度
- [x] "需要注意"部分列举 T 分低的维度
- [x] 建议针对具体的低分维度
- [x] 不会把低分说成优势，高分说成问题

### AI 分析不应该：
- [ ] 把 T 分 40 说成"很好"或"优势"
- [ ] 把 T 分 60 说成"需要改善"
- [ ] 混淆正负关系
- [ ] 给出矛盾的建议

---

## 🔍 如何验证

### 方法 1：看维度 T 分
```
查看报告页面的"维度健康详情"：
- 依恋焦虑: 43
- 依恋回避: 46
- 控制欲: 40
- 嫉妒强度: 40
- 情感依赖: 40
- 关系不安全感: 40

对照 AI 分析：
✅ "你的优势"应该是空的或很简短（没有T分≥50）
✅ "需要注意的方面"应该提到所有这些维度
```

### 方法 2：看总分解释
```
如果 LHI = 31：
✅ 应该说"需要关注"、"存在挑战"
❌ 不应该说"关系很健康"

如果 LHI = 75：
✅ 应该说"健康的爱"、"关系良好"
❌ 不应该说"有很多问题"
```

### 方法 3：检查逻辑一致性
```
如果 AI 说"你的焦虑维度很健康"：
→ 查看 T 分，应该 ≥50

如果 AI 说"控制欲需要改善"：
→ 查看 T 分，应该 <50
```

---

## 💡 为什么会反了？

### 可能的原因
1. **直觉误导**：高分=问题（常识），但这里高分=健康
2. **维度名称**：都是负面词（焦虑、控制），容易以为高分=更焦虑
3. **缺少说明**：之前的 Prompt 没有解释计算逻辑

### 现在的解决
- ✅ 明确告诉 AI："T 分数越高=负面特质越低=健康"
- ✅ 给出公式：Z = (3 - Avg) / 1
- ✅ 直接说明：≥50 健康，<50 需改善
- ✅ 提供当前结果的预解读

---

## 🚀 下一步测试

1. **刷新浏览器** → http://localhost:3001/
2. **使用万能码** → LHI159951
3. **完成问卷提交**
4. **查看结果页面**：
   - 看"维度健康详情"的 T 分数
   - 对照 AI 的"优势"和"需要注意"
   - 验证是否对应正确

5. **验证逻辑**：
   - T 分 ≥50 的维度 → 应该在"优势"中
   - T 分 <50 的维度 → 应该在"需要注意"中
   - 总分高 → 整体评价应该积极
   - 总分低 → 整体评价应该提示需改善

---

**更新时间**: 2025-12-05  
**更新版本**: v2.3  
**测试状态**: 待验证  
**重要性**: ⭐⭐⭐⭐⭐（AI 分析准确性的关键）
