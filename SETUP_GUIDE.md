# LHI Calculator å®‰è£…éƒ¨ç½²æŒ‡å—

## ğŸ“¦ å‰ç½®è¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²å®‰è£…ï¼š

1. **Node.js 18+** å’Œ **npm**
   - ä¸‹è½½åœ°å€: https://nodejs.org/
   - éªŒè¯å®‰è£…: `node --version` å’Œ `npm --version`

## ğŸš€ å®Œæ•´å®‰è£…æ­¥éª¤

### æ­¥éª¤ 1: å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd /Users/a1/Downloads/001/lhi-calculator
npm install
```

### æ­¥éª¤ 2: å®‰è£…åç«¯ä¾èµ–

```bash
cd server
npm install
```

### æ­¥éª¤ 3: åˆå§‹åŒ–æ•°æ®åº“

```bash
# åœ¨ server ç›®å½•ä¸‹æ‰§è¡Œ
npx prisma generate
npx prisma migrate dev --name init
npm run seed
```

æ‰§è¡ŒæˆåŠŸåä¼šçœ‹åˆ°ï¼š
- âœ… æ•°æ®åº“æ–‡ä»¶ `dev.db` å·²åˆ›å»º
- âœ… é»˜è®¤ç®¡ç†å‘˜è´¦å·å·²åˆ›å»º
- âœ… æµ‹è¯•å…‘æ¢ç å·²ç”Ÿæˆ

### æ­¥éª¤ 4: å¯åŠ¨åç«¯æœåŠ¡

```bash
# åœ¨ server ç›®å½•ä¸‹
npm run dev
```

åç«¯å°†åœ¨ http://localhost:5000 è¿è¡Œ

### æ­¥éª¤ 5: å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰

```bash
# å›åˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..
npm run dev
```

å‰ç«¯å°†åœ¨ http://localhost:3000 è¿è¡Œ

## âœ… éªŒè¯å®‰è£…

è®¿é—®ä»¥ä¸‹åœ°å€ç¡®è®¤ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼š

1. **å‰ç«¯ç”¨æˆ·ç•Œé¢**: http://localhost:3000
   - åº”è¯¥çœ‹åˆ°å…‘æ¢ç è¾“å…¥é¡µé¢
   - æµ‹è¯•ç ï¼š`LHI12345`

2. **ç®¡ç†åå°**: http://localhost:3000/admin
   - è´¦å·ï¼š`admin@lhi.local`
   - å¯†ç ï¼š`admin123456`

3. **APIå¥åº·æ£€æŸ¥**: http://localhost:5000/api/health
   - åº”è¯¥è¿”å›ï¼š`{"status":"ok","timestamp":"..."}`

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1: npm å‘½ä»¤æœªæ‰¾åˆ°

**è§£å†³æ–¹æ¡ˆ**: å®‰è£… Node.js
```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install node

# æˆ–è®¿é—®å®˜ç½‘ä¸‹è½½: https://nodejs.org/
```

### é—®é¢˜ 2: ç«¯å£è¢«å ç”¨

**é”™è¯¯**: `Error: listen EADDRINUSE: address already in use :::5000`

**è§£å†³æ–¹æ¡ˆ**: 
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:5000
# æ€æ­»è¿›ç¨‹
kill -9 $(lsof -ti:5000)

# æˆ–ä¿®æ”¹ç«¯å£
# ç¼–è¾‘ server/.env æ–‡ä»¶ï¼Œä¿®æ”¹ PORT=5001
```

### é—®é¢˜ 3: Prisma è¿ç§»å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**: åˆ é™¤æ•°æ®åº“é‡æ–°åˆå§‹åŒ–
```bash
cd server
rm dev.db
rm -rf prisma/migrations
npx prisma migrate dev --name init
npm run seed
```

### é—®é¢˜ 4: CORS é”™è¯¯

**é”™è¯¯**: `Access-Control-Allow-Origin error`

**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œåœ¨ http://localhost:5000

### é—®é¢˜ 5: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**è§£å†³æ–¹æ¡ˆ**: ç¡®è®¤ API åœ°å€é…ç½®
- æ£€æŸ¥ `services/api/client.ts` ä¸­çš„ `API_BASE`
- æ£€æŸ¥ `admin/services/adminApi.ts` ä¸­çš„ `API_BASE`
- é»˜è®¤åº”è¯¥æ˜¯ `http://localhost:5000/api`

## ğŸ“‚ å…³é”®æ–‡ä»¶è¯´æ˜

### é…ç½®æ–‡ä»¶
- `server/.env` - åç«¯ç¯å¢ƒå˜é‡é…ç½®
- `server/prisma/schema.prisma` - æ•°æ®åº“æ¨¡å‹å®šä¹‰
- `vite.config.ts` - å‰ç«¯æ„å»ºé…ç½®

### å¯åŠ¨è„šæœ¬
- `server/package.json` - åç«¯ä¾èµ–å’Œè„šæœ¬
- `package.json` - å‰ç«¯ä¾èµ–å’Œè„šæœ¬
- `start.sh` - ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆLinux/macOSï¼‰

## ğŸ”§ å¼€å‘æ¨¡å¼ vs ç”Ÿäº§æ¨¡å¼

### å¼€å‘æ¨¡å¼ï¼ˆå½“å‰é…ç½®ï¼‰
- SQLite æ•°æ®åº“
- çƒ­é‡è½½
- è¯¦ç»†æ—¥å¿—
- CORS å…è®¸æ‰€æœ‰æ¥æº

### ç”Ÿäº§æ¨¡å¼å»ºè®®
- ä½¿ç”¨ PostgreSQL
- æ„å»ºä¼˜åŒ–ç‰ˆæœ¬
- é…ç½®åå‘ä»£ç†ï¼ˆnginxï¼‰
- å¯ç”¨ HTTPS
- é™åˆ¶ CORS æ¥æº
- ä½¿ç”¨ PM2 è¿›ç¨‹ç®¡ç†

## ğŸ“ è·å–å¸®åŠ©

å¦‚é‡åˆ°å…¶ä»–é—®é¢˜ï¼š
1. æŸ¥çœ‹ç»ˆç«¯é”™è¯¯æ—¥å¿—
2. æ£€æŸ¥ `server/dev.db` æ˜¯å¦å­˜åœ¨
3. ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®å®‰è£…
4. å‚è€ƒ README.md ä¸­çš„è¯¦ç»†æ–‡æ¡£

---

**æç¤º**: ä½¿ç”¨ `./start.sh` å¯ä»¥ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼‰
